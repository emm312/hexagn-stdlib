@FUNC abs
@SIGNATURE int16 int16
LLOD R2 R1 2
ABS R2 R2
@END

@FUNC abs
@SIGNATURE int32 int32
LLOD R2 R1 2
ABS R2 R2
@END

@FUNC abs
@SIGNATURE int8 int8
LLOD R2 R1 2
ABS R2 R2
@END

@FUNC sign
@SIGNATURE int8 int16
LLOD R3 R1 2
BNZ ~+5 R3
MOV R2 R2
@RETURN

AND R3 R3 0x8000
BSR R3 R3 15

BNZ ~+5 R3
IMM R2 1
@RETURN

IMM R2 -1
AND R2 R2 0xff
@END
